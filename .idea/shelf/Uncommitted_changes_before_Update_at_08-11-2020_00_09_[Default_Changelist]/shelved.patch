Index: src/gamedata/loldata.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+># global variables\r\nimport pandas as pd\r\nfrom riotwatcher import LolWatcher\r\n\r\n\r\ndef getLolData(username, my_region):\r\n    api_key = 'RGAPI-cfa8f4a6-36ae-4491-acc9-a36e8e611c8a'\r\n    watcher = LolWatcher(api_key)\r\n    me = watcher.summoner.by_name(my_region, username)\r\n    my_matches = watcher.match.matchlist_by_account(my_region, me['accountId'])\r\n    # check league's latest version\r\n    latest = watcher.data_dragon.versions_for_region(my_region)['n']['champion']\r\n    # Lets get some champions static information\r\n    static_champ_list = watcher.data_dragon.champions(latest, False, 'en_US')\r\n    # champ static list data to dict for looking up\r\n    static_item_list = watcher.data_dragon.items(latest)\r\n    static_spell_list = watcher.data_dragon.summoner_spells(latest)\r\n    champ_dict = {}\r\n    item_dict = {}\r\n    spell_dict = {}\r\n\r\n    url = 'http://ddragon.leagueoflegends.com/cdn/10.21.1/img/'\r\n\r\n\r\n    for valueOne in static_champ_list['data']:\r\n        row = static_champ_list['data'][valueOne]\r\n        key = row[\"key\"]\r\n        name = row[\"name\"]\r\n        image = str(url + \"champion/\" + str(row[\"image\"][\"full\"]))\r\n        value = [name,image]\r\n        champ_dict[key] = value\r\n\r\n    for key in static_item_list['data']:\r\n        image = str(url + \"item/\" + str(key) + \".png\")\r\n        item_dict[key] = image\r\n\r\n    for id in static_spell_list['data']:\r\n        row = static_spell_list['data'][id]\r\n        image = str(\"../static/spells/\" + \"Summoner\"+ str(row[\"name\"]) + \".png\")\r\n        spell_dict[row[\"key\"]] = image\r\n\r\n    last_five_match = {}\r\n    for row in my_matches['matches'][:5]:\r\n        key = (row[\"gameId\"])\r\n        value = row[\"champion\"]\r\n        last_five_match[key] = value\r\n\r\n    players = []\r\n    for key in last_five_match:\r\n        match_detail = (watcher.match.by_id(my_region, key))\r\n        participant = match_detail[\"participants\"]\r\n        for row in participant:\r\n            if(row[\"championId\"] == last_five_match[key]):\r\n                participants_row = {}\r\n                print(row)\r\n                participants_row['champion'] = row['championId']\r\n                participants_row['championName'] = champ_dict[str(row['championId'])]\r\n                participants_row['spell1'] = spell_dict[str(row['spell1Id'])]\r\n                participants_row['spell2'] = spell_dict[str(row['spell2Id'])]\r\n                participants_row['win'] = row['stats']['win']\r\n                participants_row['kills'] = row['stats']['kills']\r\n                participants_row['deaths'] = row['stats']['deaths']\r\n                participants_row['assists'] = row['stats']['assists']\r\n                participants_row['totalDamageDealt'] = row['stats']['totalDamageDealt']\r\n                participants_row['goldEarned'] = row['stats']['goldEarned']\r\n                participants_row['champLevel'] = row['stats']['champLevel']\r\n                participants_row['totalMinionsKilled'] = row['stats']['totalMinionsKilled']\r\n                try:\r\n                    participants_row['item0'] = item_dict[str(row['stats']['item1'])]\r\n                except Exception:\r\n                    participants_row['item0'] = str(\"Null\")\r\n                try:\r\n                    participants_row['item1'] = item_dict[str(row['stats']['item1'])]\r\n                except Exception:\r\n                    participants_row['item1'] = str(\"Null\")\r\n                try:\r\n                    participants_row['item2'] = item_dict[str(row['stats']['item2'])]\r\n                except Exception:\r\n                    participants_row['item2'] = str(\"Null\")\r\n                try:\r\n                    participants_row['item3'] = item_dict[str(row['stats']['item3'])]\r\n                except Exception:\r\n                    participants_row['item3'] = str(\"Null\")\r\n                try:\r\n                    participants_row['item4'] = item_dict[str(row['stats']['item4'])]\r\n                except Exception:\r\n                    participants_row['item4'] = str(\"Null\")\r\n                try:\r\n                    participants_row['item5'] = item_dict[str(row['stats']['item5'])]\r\n                except Exception:\r\n                    participants_row['item5'] = str(\"Null\")\r\n                try:\r\n                    participants_row['item6'] = item_dict[str(row['stats']['item6'])]\r\n                except Exception:\r\n                    participants_row['item6'] = str(\"Null\")\r\n\r\n                players.append(participants_row)\r\n\r\n    df = pd.DataFrame(players)\r\n    return df.to_json()\r\n\r\n\r\n\r\ndef main():\r\n   print(getLolData(\"doublelift\", \"na1\"))\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    main()
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/gamedata/loldata.py	(revision 95610a1365fd5f00ab096df9c9639e3f8b4e3940)
+++ src/gamedata/loldata.py	(date 1604774334690)
@@ -19,7 +19,6 @@
     item_dict = {}
     spell_dict = {}
 
-    url = 'http://ddragon.leagueoflegends.com/cdn/10.21.1/img/'
 
 
     for valueOne in static_champ_list['data']:
